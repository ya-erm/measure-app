{"version":3,"sources":["components/Geometry.ts","utils/svg/convert.ts","hooks/useDrawing.ts","components/Draw.ts","components/History/useHistory.ts","components/GlobalContext.tsx","assets/icons/delete.svg","assets/icons/redo.svg","assets/icons/undo.svg","assets/icons/backspace-o.svg","components/RoundButton/RoundButton.tsx","components/History/HistoryPanel.tsx","assets/icons/swap.svg","assets/icons/door.svg","assets/icons/ruler.svg","assets/icons/wall.svg","assets/icons/window.svg","assets/icons/export.svg","components/Keyboard/WallTypeSelector.tsx","components/Keyboard/Keyboard.tsx","components/PreventTouch.tsx","assets/icons/folder-o.svg","assets/icons/save.svg","utils/svg/save.ts","assets/icons/settings.svg","components/FileActions/FileActions.tsx","components/Settings/Settings.tsx","components/Settings/TodoList.tsx","components/Settings/SettingsPanel.tsx","components/Tools/ToolEvent.ts","components/Tools/CursorTool.tsx","assets/icons/bulldozer.svg","components/Tools/DestroyTool.tsx","components/Tools/HistoryTool.tsx","components/Tools/MoveTool.tsx","components/Tools/PenTool.tsx","assets/icons/cursor.svg","assets/icons/eraser.svg","assets/icons/eye.svg","assets/icons/pencil.svg","components/Tools/Toolbox.tsx","components/Tools/WallTool.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["getWallOrientation","p1","p2","dx","x","dy","y","Math","abs","getAngle","degrees","x1","y1","x2","y2","riseOverRun","atan","PI","distanceBetween","sqrt","guideLineMagnetSize","inRange","min","max","crossLines","l1","l2","n","onLine","x3","y3","x4","y4","q","sn","fn","polarToCartesian","cx","cy","radius","angle","angleInRadians","cos","sin","getSvgPathFromStroke","stroke","length","d","reduce","acc","i","arr","x0","y0","push","join","SVG_NS","setOptionalAttribute","element","attribute","value","condition","undefined","setAttribute","toString","removeAttribute","setCommonOptions","options","fill","strokeWidth","strokeDashArray","setLineOptions","line","rx","ry","setRectOptions","rect","width","height","setCircleOptions","ellipse","setArcOptions","arc","startAngle","endAngle","start","end","largeArcFlag","data","setTextOptions","fontSize","text","textContent","findOrCreate","svg","key","type","groupId","getElementById","id","Date","getTime","document","createElementNS","dest","appendChild","wallPointSize","wallGroupId","wall","pointGroupId","point","editId","drawWallStart","ctx","drawRect","drawWallEnd","drawWall","color","createGroup","bodyId","drawLine","variant","parseInt","inside","rightOpen","drawArc","removeElement","drawLengths","gid","alpha","topText","drawText","bottomText","drawGuideLines","guideLines","guideLinesIds","map","guideLine","guideLineId","removeElements","child","includes","removeGuideLines","undoHistory","redoHistory","restoreFrom","source","destination","Object","entries","forEach","sourceKeys","keys","filter","savePlan","plan","localStorage","setItem","JSON","stringify","drawPlan","drawing","walls","w","notes","drawPath","erasePlan","defaultState","settings","defaultSettings","stylusMode","magneticMode","wallAlignmentMode","selectedTool","json","getItem","parse","loadSettings","pointerDown","scale","defaultPlan","console","log","loadPlan","useGlobalState","useForm","defaultValues","control","getValues","setValue","svgRef","useRef","useEffect","handleResize","current","parent","parentElement","getBoundingClientRect","window","addEventListener","removeEventListener","drawCircle","parentId","group","querySelector","remove","predicate","childNodes","points","path","getStroke","size","smoothing","thinning","useDrawing","drawingRef","commandsHistory","useMemo","add","record","undo","item","pop","tool","addedWall","before","destroyedWalls","redo","after","clear","useHistory","interactiveRef","_path","GlobalContext","React","createContext","useGlobalContext","context","useContext","Error","getViewBox","ref","viewBox","getAttribute","split","ratio","findNearPoints","flatMap","p","findNearWall","find","l","pointProjection","_excluded","_extends","assign","target","arguments","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","SvgDelete","_ref","title","titleId","props","xmlns","xmlnsXlink","ForwardRef","SvgRedo","SvgUndo","RoundButton","icon","active","className","children","onClick","role","clsx","HistoryPanel","useWatch","name","handleKeyDown","e","ctrlKey","metaKey","code","confirm","SvgBackspaceO","SvgSwap","SvgDoor","SvgRuler","SvgWall","SvgWindow","WallTypeSelector","wallType","onSubmit","WallButton","nextVariant","ActionButton","Keyboard","useState","selectedInput","setSelectedInput","text1","setText1","text2","setText2","setText","handleSubmit","prev","substring","NumberButton","colSpan","tabIndex","onKeyDown","MiniKeyboard","selectedWall","style","top","left","cloneDeep","PreventTouch","onTouchMove","preventDefault","passive","SvgExport","SvgFolderO","SvgSave","downloadFile","content","fileName","contentType","a","createElement","file","Blob","href","URL","createObjectURL","download","click","FileActions","exportSvg","useCallback","clone","cloneNode","svgDocType","implementation","createDocumentType","svgDoc","createDocument","replaceChild","documentElement","XMLSerializer","serializeToString","replace","toLocaleDateString","saveSvg","saveJson","loadJson","onLoad","input","onchange","files","reader","FileReader","readAsText","onload","readerEvent","result","uploadFile","parsedPlan","SvgSettings","Settings","saveSettings","checked","onChange","TodoList","SettingsPanel","isOpen","setIsOpen","registerTool","onStart","onMove","onEnd","mouseToToolEvent","touches","identifier","pageX","pageY","buttons","changedTouches","onMouseDown","onMouseMove","onMouseUp","touchToToolEvent","touch","Array","from","touchType","onTouchStart","onTouchEnd","cloneEditingWalls","CursorTool","cursor","_hoverWall","_selectedWall","_wallBefore","unsubscribe","newSelectedWall","editingPoints","guidLines","findAllGuideLines","closePoint","o","isAnyWallMoved","w2","w1","areWallsCoordinatesEqual","DestroyTool","_startPoint","_removingWalls","destroyLine","crossIds","xc","yc","crossId","startsWith","HistoryTool","lastEnd","lines","now","timeDiff","notMoved","MoveTool","_startViewBox","vx","vy","PenTool","getStrokeOptions","force","pressure","Number","toFixed","strokeOptions","SvgBulldozer","SvgCursor","SvgEraser","SvgEye","SvgPencil","Toolbox","previousTool","setPreviousTool","setSelectedTool","ToolBoxItem","handleKeyUp","WallTool","wallIndex","findIndex","splice","cancel","wallId","orientation","other","findAlignedGuideLines","App","globalContext","Provider","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render"],"mappings":"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","file":"static/js/main.b9964df8.chunk.js","sourcesContent":["import { Line, Point } from './GlobalContext';\n\nexport type WallOrientation = 'horizontal' | 'vertical';\n\nexport function getWallOrientation({ p1, p2 }: { p1: Point; p2: Point }): WallOrientation {\n    const dx = p2.x - p1.x;\n    const dy = p2.y - p1.y;\n    if (Math.abs(dx) > Math.abs(dy)) {\n        return 'horizontal';\n    }\n    return 'vertical';\n}\n\nexport function getAngle(p1: Point, p2: Point) {\n    const x1 = p1.x;\n    const y1 = p1.y;\n    const x2 = p2.x;\n    const y2 = p2.y;\n    let degrees;\n    if (x2 === x1) {\n        degrees = y2 > y1 ? 90 : 270;\n    } else if (y2 === y1) {\n        degrees = x2 > x1 ? 0 : 180;\n    } else {\n        const riseOverRun = (y2 - y1) / (x2 - x1);\n        const radians = Math.atan(riseOverRun);\n        degrees = radians * (180 / Math.PI);\n\n        if (x2 - x1 < 0 || y2 - y1 < 0) degrees += 180;\n        if (x2 - x1 > 0 && y2 - y1 < 0) degrees -= 180;\n        if (degrees < 0) degrees += 360;\n    }\n    return degrees;\n}\n\nexport function distanceBetween(p1: Point, p2: Point): number {\n    return Math.sqrt((p2.x - p1.x) * (p2.x - p1.x) + (p2.y - p1.y) * (p2.y - p1.y));\n}\n\nexport const guideLineMagnetSize = 20;\n\nexport type GuideLine = {\n    wall: Line;\n    point: Point;\n};\n\nexport function findAlignedGuideLines(walls: Line[], wall: Line): GuideLine[] {\n    const orientation = getWallOrientation(wall);\n    const guidLines: GuideLine[] = [];\n    walls.forEach((w) => {\n        if (wall === w) return;\n        const other = w.p1.x === w.p2.x ? 'vertical' : w.p1.y === w.p2.y ? 'horizontal' : 'other';\n        if (orientation === 'horizontal' && other === 'horizontal') {\n            if (Math.abs(wall.p2.x - w.p1.x) < guideLineMagnetSize) {\n                wall.p2.x = w.p1.x;\n                guidLines.push({ wall: w, point: w.p1 });\n            } else if (Math.abs(wall.p2.x - w.p2.x) < guideLineMagnetSize) {\n                wall.p2.x = w.p2.x;\n                guidLines.push({ wall: w, point: w.p2 });\n            }\n        } else if (orientation === 'vertical' && other === 'vertical') {\n            if (Math.abs(wall.p2.y - w.p1.y) < guideLineMagnetSize) {\n                wall.p2.y = w.p1.y;\n                guidLines.push({ wall: w, point: w.p1 });\n            } else if (Math.abs(wall.p2.y - w.p2.y) < guideLineMagnetSize) {\n                wall.p2.y = w.p2.y;\n                guidLines.push({ wall: w, point: w.p2 });\n            }\n        }\n    });\n    return guidLines;\n}\n\nexport function findAllGuideLines(walls: Line[], points: Point[], point: Point): GuideLine[] {\n    const guidLines: GuideLine[] = [];\n    walls.forEach((w) => {\n        if (Math.abs(w.p1.x - point.x) < guideLineMagnetSize) {\n            guidLines.push({ wall: w, point: w.p1 });\n            points.forEach((p) => {\n                p.x = w.p1.x;\n            });\n        }\n        if (Math.abs(w.p1.y - point.y) < guideLineMagnetSize) {\n            guidLines.push({ wall: w, point: w.p1 });\n            points.forEach((p) => {\n                p.y = w.p1.y;\n            });\n        }\n\n        if (Math.abs(w.p2.x - point.x) < guideLineMagnetSize) {\n            guidLines.push({ wall: w, point: w.p2 });\n            points.forEach((p) => {\n                p.x = w.p2.x;\n            });\n        }\n        if (Math.abs(w.p2.y - point.y) < guideLineMagnetSize) {\n            guidLines.push({ wall: w, point: w.p2 });\n            points.forEach((p) => {\n                p.y = w.p2.y;\n            });\n        }\n    });\n    return guidLines;\n}\n\nfunction inRange(x: number, x1: number, x2: number) {\n    return Math.min(x1, x2) <= x && x <= Math.max(x1, x2);\n}\n\nexport function crossLines(l1: Line, l2: Line, onLine: boolean = false) {\n    const x1 = l1.p1.x;\n    const y1 = l1.p1.y;\n    const x2 = l1.p2.x;\n    const y2 = l1.p2.y;\n    const x3 = l2.p1.x;\n    const y3 = l2.p1.y;\n    const x4 = l2.p2.x;\n    const y4 = l2.p2.y;\n    let n: number;\n    if (y2 - y1 !== 0) {\n        const q = (x2 - x1) / (y1 - y2);\n        const sn = x3 - x4 + (y3 - y4) * q;\n        if (!sn) {\n            return null;\n        }\n        const fn = x3 - x1 + (y3 - y1) * q;\n        n = fn / sn;\n    } else {\n        if (!(y3 - y4)) {\n            return null;\n        }\n        n = (y3 - y1) / (y3 - y4);\n    }\n    const x = x3 + (x4 - x3) * n;\n    const y = y3 + (y4 - y3) * n;\n\n    if (onLine) {\n        if (inRange(x, x1, x2) && inRange(x, x3, x4) && inRange(y, y1, y2) && inRange(y, y3, y4)) {\n            return { x, y };\n        }\n        return null;\n    }\n\n    return { x, y };\n}\n\nexport function pointProjection(p: Point, l: Line, onLine: boolean = false) {\n    const x1 = l.p1.x;\n    const y1 = l.p1.y;\n    const x2 = l.p2.x;\n    const y2 = l.p2.y;\n    const x3 = p.x;\n    const y3 = p.y;\n\n    const x =\n        (x1 * x1 * x3 -\n            2 * x1 * x2 * x3 +\n            x2 * x2 * x3 +\n            x2 * (y1 - y2) * (y1 - y3) -\n            x1 * (y1 - y2) * (y2 - y3)) /\n        ((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\n    const y =\n        (x2 * x2 * y1 +\n            x1 * x1 * y2 +\n            x2 * x3 * (y2 - y1) -\n            x1 * (x3 * (y2 - y1) + x2 * (y1 + y2)) +\n            (y1 - y2) * (y1 - y2) * y3) /\n        ((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\n\n    if (onLine) {\n        if (inRange(x, x1, x2) && inRange(y, y1, y2)) {\n            return { x, y };\n        }\n        return null;\n    }\n\n    return { x, y };\n}\n\nexport function rotateVector(v: { x: number; y: number }, angle: number) {\n    const cs = Math.cos(angle);\n    const sn = Math.sin(angle);\n    const rx = v.x * cs - v.y * sn;\n    const ry = v.x * sn + v.y * cs;\n    return { x: rx, y: ry };\n}\n\nexport function normalizeVector(v: { x: number; y: number }) {\n    const length = Math.sqrt(v.x * v.x + v.y * v.y);\n    if (length === 0) return v;\n    return { x: v.x / length, y: v.y / length };\n}\n\nexport function polarToCartesian(cx: number, cy: number, radius: number, angle: number) {\n    var angleInRadians = ((angle - 90) * Math.PI) / 180.0;\n    return {\n        x: cx + radius * Math.cos(angleInRadians),\n        y: cy + radius * Math.sin(angleInRadians),\n    };\n}\n","export function getSvgPathFromStroke(stroke: number[][]) {\n    if (!stroke.length) return '';\n\n    const d = stroke.reduce(\n        (acc, [x0, y0], i, arr) => {\n            const [x1, y1] = arr[(i + 1) % arr.length];\n            acc.push(x0, y0, (x0 + x1) / 2, (y0 + y1) / 2);\n            return acc;\n        },\n        ['M', ...stroke[0], 'Q'],\n    );\n\n    d.push('Z');\n    return d.join(' ');\n}\n","import { getStroke } from 'perfect-freehand';\nimport React, { useEffect, useRef } from 'react';\nimport { polarToCartesian } from '../components/Geometry';\nimport { getSvgPathFromStroke } from '../utils/svg/convert';\n\ntype IDrawIdOptions = {\n    id?: string;\n    groupId?: string;\n};\n\ntype IDrawStrokeOptions = {\n    stroke?: string;\n    strokeWidth?: number;\n    strokeDashArray?: string;\n};\n\ntype IDrawRotateOptions = {\n    angle?: number;\n    rx?: number;\n    ry?: number;\n};\n\ntype IDrawShapeOptions = {\n    fill?: string;\n} & IDrawStrokeOptions &\n    IDrawRotateOptions;\n\ntype IDrawLineOptions = {\n    x1: number;\n    y1: number;\n    x2: number;\n    y2: number;\n} & IDrawStrokeOptions &\n    IDrawRotateOptions &\n    IDrawIdOptions;\n\ntype IDrawRectOptions = {\n    cx: number;\n    cy: number;\n    width: number;\n    height: number;\n    angle?: number;\n} & IDrawShapeOptions &\n    IDrawIdOptions;\n\ntype IDrawCircleOptions = {\n    x: number;\n    y: number;\n    rx: number;\n    ry: number;\n} & IDrawShapeOptions &\n    IDrawIdOptions;\n\ntype IDrawArcOptions = {\n    cx: number;\n    cy: number;\n    radius: number;\n    startAngle: number;\n    endAngle: number;\n} & IDrawShapeOptions &\n    IDrawIdOptions;\n\ntype IPathPoint = { x: number; y: number; pressure?: number };\n\nexport type IDrawPathOptions = {\n    points: IPathPoint[];\n} & IDrawShapeOptions &\n    IDrawIdOptions;\n\nexport type IDrawTextOptions = {\n    x: number;\n    y: number;\n    angle?: number;\n    fontSize?: number;\n    text: string;\n} & IDrawShapeOptions &\n    IDrawIdOptions;\n\nexport type IDrawing = {\n    createGroup: (id?: string, groupId?: string) => string;\n    drawLine: (options: IDrawLineOptions) => string;\n    drawCircle: (options: IDrawCircleOptions) => string;\n    drawArc: (options: IDrawArcOptions) => string;\n    drawRect: (options: IDrawRectOptions) => string;\n    drawPath: (options: IDrawPathOptions) => string;\n    drawText: (options: IDrawTextOptions) => string;\n    removeElement: (id: string, groupId?: string) => void;\n    removeElements: (predicate: (element: Element) => boolean, groupId?: string) => void;\n};\n\ntype UseDrawingReturn = {\n    svgRef: React.RefObject<SVGSVGElement>;\n    drawing: IDrawing;\n};\n\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n\nfunction setOptionalAttribute(\n    element: Element,\n    attribute: string,\n    value: any,\n    condition?: boolean,\n) {\n    if (condition !== undefined ? condition : !!value) {\n        element.setAttribute(attribute, value.toString());\n    } else {\n        element.removeAttribute(attribute);\n    }\n}\n\nfunction setCommonOptions(element: Element, options: IDrawShapeOptions) {\n    const { fill, stroke, strokeWidth, strokeDashArray } = options;\n    setOptionalAttribute(element, 'fill', fill);\n    setOptionalAttribute(element, 'stroke', stroke);\n    setOptionalAttribute(element, 'stroke-width', strokeWidth);\n    setOptionalAttribute(element, 'stroke-dasharray', strokeDashArray);\n}\n\nfunction setLineOptions(line: Element, options: IDrawLineOptions) {\n    setCommonOptions(line, options);\n    const { x1, x2, y1, y2, stroke = '#000', angle, rx, ry } = options;\n    const cx = (x2 - x1) / 2;\n    const cy = (y2 - y1) / 2;\n    line.setAttribute('x1', x1.toString());\n    line.setAttribute('y1', y1.toString());\n    line.setAttribute('x2', x2.toString());\n    line.setAttribute('y2', y2.toString());\n    setOptionalAttribute(line, 'transform', `rotate(${angle}, ${rx ?? cx}, ${ry ?? cy})`, !!angle);\n    line.setAttribute('stroke', stroke);\n}\n\nfunction setRectOptions(rect: Element, options: IDrawRectOptions) {\n    const { cx, cy, width, height, angle, rx, ry } = options;\n    rect.setAttribute('x', (cx - width / 2).toString());\n    rect.setAttribute('y', (cy - height / 2).toString());\n    rect.setAttribute('width', width.toString());\n    rect.setAttribute('height', height.toString());\n    setOptionalAttribute(rect, 'transform', `rotate(${angle}, ${rx ?? cx}, ${ry ?? cy})`, !!angle);\n    setCommonOptions(rect, options);\n}\n\nfunction setCircleOptions(ellipse: Element, options: IDrawCircleOptions) {\n    setCommonOptions(ellipse, options);\n    const { x, y, rx, ry } = options;\n    ellipse.setAttribute('cx', x.toString());\n    ellipse.setAttribute('cy', y.toString());\n    ellipse.setAttribute('rx', rx.toString());\n    ellipse.setAttribute('ry', ry.toString());\n}\n\nfunction setArcOptions(arc: Element, options: IDrawArcOptions) {\n    setCommonOptions(arc, options);\n    const { cx, cy, radius, startAngle, endAngle, angle, rx, ry } = options;\n    const start = polarToCartesian(cx, cy, radius, endAngle);\n    const end = polarToCartesian(cx, cy, radius, startAngle);\n    const largeArcFlag = endAngle - startAngle <= 180 ? '0' : '1';\n    const data = ['M', start.x, start.y, 'A', radius, radius, 0, largeArcFlag, 0, end.x, end.y];\n    arc.setAttribute('d', data.join(' '));\n    setOptionalAttribute(arc, 'transform', `rotate(${angle}, ${rx ?? cx}, ${ry ?? cy})`, !!angle);\n}\n\nfunction setTextOptions(element: Element, options: IDrawTextOptions) {\n    setCommonOptions(element, options);\n    const { x, y, angle = 0, rx, ry, fontSize = 20, text } = options;\n    element.setAttribute('x', x.toString());\n    element.setAttribute('y', (y + 8).toString());\n    element.setAttribute('style', `text-anchor: middle; font-size: ${fontSize}px`);\n    element.setAttribute('transform', `rotate(${angle}, ${rx ?? x}, ${ry ?? y})`);\n    element.textContent = text;\n}\n\nfunction findOrCreate(\n    svg: SVGSVGElement | null,\n    key: string | undefined,\n    type: string,\n    groupId?: string,\n) {\n    let element = key ? svg?.getElementById(key) : undefined;\n    const id = key ?? `e${new Date().getTime()}`;\n    if (!element) {\n        element = document.createElementNS(SVG_NS, type);\n        element.setAttribute('id', id);\n        const dest = groupId ? svg?.getElementById(groupId) : svg;\n        dest?.appendChild(element);\n    }\n    return { element, id };\n}\n\nexport function useDrawing(scale: number = 1): UseDrawingReturn {\n    const svgRef = useRef<SVGSVGElement>(null);\n\n    useEffect(() => {\n        function handleResize() {\n            const svg = svgRef.current;\n            const parent = svg?.parentElement;\n            if (!svg || !parent) return;\n            const { width, height } = parent!.getBoundingClientRect();\n            svg.setAttribute('viewBox', `0 0 ${width * scale} ${height * scale}`);\n            svg.setAttribute('version', '1.1');\n            svg.setAttribute('xmlns', SVG_NS);\n        }\n        handleResize();\n        window.addEventListener('resize', handleResize);\n        return () => window.removeEventListener('resize', handleResize);\n    }, [scale, svgRef]);\n\n    const drawing: IDrawing = {\n        drawLine: (options) => {\n            const { element, id } = findOrCreate(\n                svgRef.current,\n                options.id,\n                'line',\n                options.groupId,\n            );\n            setLineOptions(element, options);\n            return id;\n        },\n        drawCircle: (options) => {\n            const { element, id } = findOrCreate(\n                svgRef.current,\n                options.id,\n                'ellipse',\n                options.groupId,\n            );\n            setCircleOptions(element, options);\n            return id;\n        },\n        drawArc: (options) => {\n            const { element, id } = findOrCreate(\n                svgRef.current,\n                options.id,\n                'path',\n                options.groupId,\n            );\n            setArcOptions(element, options);\n            return id;\n        },\n        drawRect: (options) => {\n            const { element, id } = findOrCreate(\n                svgRef.current,\n                options.id,\n                'rect',\n                options.groupId,\n            );\n            setRectOptions(element, options);\n            return id;\n        },\n        drawText: (options) => {\n            const { element, id } = findOrCreate(\n                svgRef.current,\n                options.id,\n                'text',\n                options.groupId,\n            );\n            setTextOptions(element, options);\n            return id;\n        },\n        createGroup: (key, parentId) => {\n            const { id } = findOrCreate(svgRef.current, key, 'g', parentId);\n            return id;\n        },\n        removeElement: (id, groupId) => {\n            const group = groupId ? svgRef.current?.getElementById(groupId) : svgRef.current;\n            const element = group?.querySelector(`#${id}`);\n            element?.remove();\n        },\n        removeElements: (predicate, groupId) => {\n            const group = groupId ? svgRef.current?.getElementById(groupId) : svgRef.current;\n            group?.childNodes?.forEach((child) => {\n                if (predicate(child as Element)) {\n                    child.remove();\n                }\n            });\n        },\n\n        drawPath: (options) => {\n            const { id: key, points, groupId } = options;\n            const { element: path, id } = findOrCreate(svgRef.current, key, 'path', groupId);\n            if (options.stroke) path.setAttribute('fill', options.stroke);\n            path.setAttribute(\n                'd',\n                getSvgPathFromStroke(\n                    getStroke(points, {\n                        // TODO: configure drawing options\n                        size: options.strokeWidth,\n                        smoothing: 0.5,\n                        thinning: 0.5,\n                    }),\n                ),\n            );\n            return id;\n        },\n    };\n\n    return {\n        svgRef,\n        drawing,\n    };\n}\n","import { IDrawing } from '../hooks/useDrawing';\nimport { distanceBetween, getAngle, GuideLine } from './Geometry';\nimport { Line, Point, Wall } from './GlobalContext';\n\nexport type DrawEvent = { x: number; y: number; id: number };\n\nexport type DrawPoint = Point & {\n    pressure?: number;\n    color?: string;\n};\n\ntype Context = IDrawing;\n\nexport function drawCircle(\n    ctx: Context,\n    id: string | undefined,\n    groupId: string | undefined,\n    xc: number,\n    yc: number,\n    radius: number,\n    fill?: string,\n    stroke?: string,\n) {\n    ctx.drawCircle({ id, groupId, x: xc, y: yc, rx: radius, ry: radius, fill, stroke });\n}\n\nexport const wallPointSize = 12;\nexport const wallCircleRadius = 16;\n\nexport const wallGroupId = (wall: Line) => `w${wall.id}`;\nexport const pointGroupId = (point: Point) => `p${point.editId}`;\n\nexport function drawWallStart(ctx: Context, wall: Line, stroke?: string) {\n    ctx.drawRect({\n        id: `w${wall.id}s`,\n        groupId: wallGroupId(wall),\n        cx: wall.p1.x,\n        cy: wall.p1.y,\n        width: wallPointSize,\n        height: wallPointSize,\n        strokeWidth: 1,\n        stroke: stroke ?? '#000',\n        fill: '#bbb',\n    });\n}\nexport function drawWallEnd(ctx: Context, wall: Line, stroke?: string) {\n    ctx.drawRect({\n        id: `w${wall.id}e`,\n        groupId: wallGroupId(wall),\n        cx: wall.p2.x,\n        cy: wall.p2.y,\n        width: wallPointSize,\n        height: wallPointSize,\n        strokeWidth: 1,\n        stroke: stroke ?? '#000',\n        fill: '#bbb',\n    });\n}\n\nexport function drawWall(ctx: Context, wall: Wall, color = '#000') {\n    const groupId = ctx.createGroup(wallGroupId(wall), 'walls');\n    const bodyId = ctx.createGroup(`${groupId}.body`, groupId);\n    // drawCircle(ctx, `w${wall.id}c1`, groupId, wall.p1.x, wall.p1.y, wallCircleRadius, 'none', '#000');\n    // drawCircle(ctx, `w${wall.id}c2`, groupId, wall.p2.x, wall.p2.y, wallCircleRadius, 'none', '#000');\n    if (wall.type === 'wall' || wall.type === 'window' || !wall.type) {\n        ctx.drawRect({\n            groupId: bodyId,\n            id: `w${wall.id}r`,\n            cx: (wall.p1.x + wall.p2.x) / 2,\n            cy: (wall.p1.y + wall.p2.y) / 2,\n            angle: getAngle(wall.p1, wall.p2),\n            width: distanceBetween(wall.p1, wall.p2),\n            height: wall.type === 'window' ? wallPointSize / 2 : wallPointSize,\n            strokeWidth: 1,\n            stroke: color,\n            fill: wall.type === 'window' ? 'none' : '#ccc',\n        });\n        ctx.removeElement(`w${wall.id}l`, bodyId);\n        ctx.removeElement(`w${wall.id}d`, bodyId);\n        ctx.removeElement(`w${wall.id}a`, bodyId);\n    } else {\n        ctx.drawLine({\n            groupId: bodyId,\n            id: `w${wall.id}l`,\n            x1: wall.p1.x,\n            y1: wall.p1.y,\n            x2: wall.p2.x,\n            y2: wall.p2.y,\n            stroke: color,\n            strokeDashArray: '3 3',\n        });\n        if (wall.type === 'door') {\n            const variant = parseInt(wall.variant ?? '1') || 1;\n            const inside = variant === 1 || variant === 3;\n            const rightOpen = variant === 1 || variant === 2;\n            ctx.drawLine({\n                groupId: bodyId,\n                id: `w${wall.id}d`,\n                x1: wall.p1.x,\n                y1: wall.p1.y,\n                x2: wall.p2.x,\n                y2: wall.p2.y,\n                stroke: color,\n                angle: inside ? -45 : 45,\n                rx: rightOpen ? wall.p2.x : wall.p1.x,\n                ry: rightOpen ? wall.p2.y : wall.p1.y,\n            });\n            const startAngle = (rightOpen ? 180 : 0) + 45 + (variant % 2 === 0 ? 45 : 0);\n            ctx.drawArc({\n                groupId: bodyId,\n                id: `w${wall.id}a`,\n                cx: rightOpen ? wall.p2.x : wall.p1.x,\n                cy: rightOpen ? wall.p2.y : wall.p1.y,\n                strokeWidth: 1,\n                startAngle: startAngle,\n                endAngle: startAngle + 45,\n                angle: getAngle(wall.p1, wall.p2),\n                radius: distanceBetween(wall.p1, wall.p2),\n                strokeDashArray: '5 5',\n                stroke: color,\n                fill: 'none',\n            });\n        } else {\n            ctx.removeElement(`w${wall.id}d`, bodyId);\n            ctx.removeElement(`w${wall.id}a`, bodyId);\n        }\n        ctx.removeElement(`w${wall.id}r`, bodyId);\n    }\n    if (!wall.type || wall.type === 'wall' || wall.type === 'door') {\n        drawWallStart(ctx, wall, color);\n        drawWallEnd(ctx, wall, color);\n    } else {\n        ctx.removeElement(`w${wall.id}s`, groupId);\n        ctx.removeElement(`w${wall.id}e`, groupId);\n    }\n    drawLengths(ctx, wall, color);\n}\n\nfunction drawLengths(ctx: Context, wall: Wall, color: string) {\n    const gid = wallGroupId(wall);\n\n    const cx = (wall.p1.x + wall.p2.x) / 2;\n    const cy = (wall.p1.y + wall.p2.y) / 2;\n    let angle = getAngle(wall.p1, wall.p2);\n    if (angle >= 90 && angle < 270) angle -= 180;\n    let alpha = -(angle * Math.PI) / 180;\n\n    if (wall.topText) {\n        ctx.drawText({\n            groupId: gid,\n            id: `w${wall.id}t1`,\n            text: `${wall.topText}`,\n            x: cx - 20 * Math.sin(alpha),\n            y: cy - 20 * Math.cos(alpha),\n            fill: color,\n            angle,\n        });\n    } else {\n        ctx.removeElement(`w${wall.id}t1`, gid);\n    }\n\n    if (wall.bottomText) {\n        ctx.drawText({\n            groupId: gid,\n            id: `w${wall.id}t2`,\n            text: `${wall.bottomText}`,\n            x: cx + 20 * Math.sin(alpha),\n            y: cy + 22 * Math.cos(alpha),\n            fill: color,\n            angle,\n        });\n    } else {\n        ctx.removeElement(`w${wall.id}t2`, gid);\n    }\n}\n\nexport function drawGuideLines(ctx: Context, point: Point, guideLines: GuideLine[]) {\n    const groupId = ctx.createGroup(pointGroupId(point), 'guide');\n    const guideLinesIds = guideLines.map((guideLine) => {\n        const guideLineId = `p${point.editId}g${guideLine.wall.id}`;\n        ctx.drawLine({\n            groupId,\n            id: guideLineId,\n            x1: point.x,\n            y1: point.y,\n            x2: guideLine.point.x,\n            y2: guideLine.point.y,\n            strokeDashArray: '10 10',\n        });\n        return guideLineId;\n    });\n    ctx.removeElements((child) => !guideLinesIds.includes((child as Element).id), groupId);\n}\n\nexport function removeGuideLines(ctx: Context, point: Point) {\n    ctx.removeElement(pointGroupId(point), 'guide');\n}\n","import { useMemo } from 'react';\nimport { IDrawing, IDrawPathOptions } from '../../hooks/useDrawing';\nimport { drawWall, wallGroupId } from '../Draw';\nimport { IPlan, savePlan, Wall } from '../GlobalContext';\n\nexport type IHistory = {\n    add: (record: IHistoryRecord) => void;\n    undo: () => void;\n    redo: () => void;\n    clear: () => void;\n};\n\nexport type IWallHistoryRecord = {\n    tool: 'wall';\n    data: {\n        addedWall: Wall;\n    };\n};\n\nexport type ICursorHistoryRecord = {\n    tool: 'cursor';\n    data: {\n        before: Wall[];\n        after: Wall[];\n    };\n};\n\nexport type IPencilHistoryRecord = {\n    tool: 'pencil' | 'eraser';\n    data: {\n        options: IDrawPathOptions;\n    };\n};\n\nexport type IDestroyHistoryRecord = {\n    tool: 'destroy';\n    data: {\n        destroyedWalls: Wall[];\n    };\n};\n\nexport type IHistoryRecord =\n    | IWallHistoryRecord\n    | ICursorHistoryRecord\n    | IPencilHistoryRecord\n    | IDestroyHistoryRecord;\n\nlet undoHistory: IHistoryRecord[] = [];\nlet redoHistory: IHistoryRecord[] = [];\n\nfunction restoreFrom<T>(source: T, destination: T) {\n    Object.entries(source).forEach(([key, value]) => {\n        // @ts-ignore\n        destination[key] = value;\n    });\n\n    // Remove deleted properties\n    const sourceKeys = Object.keys(source);\n    Object.keys(destination)\n        .filter((key) => !sourceKeys.includes(key))\n        .forEach((key) => {\n            // @ts-ignore\n            delete destination[key];\n        });\n}\n\nexport function useHistory(drawing: IDrawing, plan: IPlan): IHistory {\n    const history: IHistory = useMemo(\n        () => ({\n            add: (record) => {\n                undoHistory.push(record);\n                redoHistory = [];\n                savePlan(plan);\n            },\n\n            undo: () => {\n                const item = undoHistory.pop();\n                if (!item) return;\n                redoHistory.push(item);\n                switch (item.tool) {\n                    case 'wall':\n                        const { addedWall } = item?.data;\n                        plan.walls = plan.walls.filter((w) => w !== addedWall);\n                        drawing.removeElement(wallGroupId(addedWall));\n                        break;\n                    case 'cursor':\n                        const { before } = item.data;\n                        before.forEach((wall) => {\n                            plan.walls\n                                .filter((w) => w.id === wall.id)\n                                .forEach((w) => {\n                                    restoreFrom(wall, w);\n                                    drawWall(drawing, w);\n                                });\n                        });\n                        break;\n                    case 'pencil':\n                    case 'eraser':\n                        const { options } = item.data;\n                        if (options.id) {\n                            plan.notes = plan.notes.filter((n) => n.id !== options.id);\n                            drawing.removeElement(options.id);\n                        }\n                        break;\n                    case 'destroy':\n                        const { destroyedWalls } = item.data;\n                        destroyedWalls.forEach((w) => {\n                            plan.walls.push(w);\n                            drawWall(drawing, w);\n                        });\n                        break;\n                }\n                savePlan(plan);\n            },\n\n            redo: () => {\n                const item = redoHistory.pop();\n                if (!item) return;\n                undoHistory.push(item);\n                switch (item.tool) {\n                    case 'wall':\n                        const { addedWall } = item?.data;\n                        plan.walls.push(addedWall);\n                        drawWall(drawing, addedWall);\n                        break;\n                    case 'cursor':\n                        const { after } = item.data;\n                        after.forEach((wall) => {\n                            plan.walls\n                                .filter((w) => w.id === wall.id)\n                                .forEach((w) => {\n                                    restoreFrom(wall, w);\n                                    drawWall(drawing, w);\n                                });\n                        });\n                        break;\n                    case 'pencil':\n                    case 'eraser':\n                        const { options } = item.data;\n                        plan.notes.push(options);\n                        drawing.drawPath(options);\n                        break;\n                    case 'destroy':\n                        const { destroyedWalls } = item.data;\n                        destroyedWalls.forEach((w) => drawing.removeElement(wallGroupId(w)));\n                        plan.walls = plan.walls.filter((w) => !destroyedWalls.includes(w));\n                        break;\n                }\n                savePlan(plan);\n            },\n\n            clear: () => {\n                undoHistory = [];\n                redoHistory = [];\n            },\n        }),\n        [plan, drawing],\n    );\n    return history;\n}\n","import React, { useEffect, useRef } from 'react';\nimport { Control, useForm, UseFormGetValues, UseFormSetValue } from 'react-hook-form';\nimport { IDrawing, IDrawPathOptions, useDrawing } from '../hooks/useDrawing';\nimport { drawWall, wallCircleRadius, wallGroupId } from './Draw';\nimport { distanceBetween, pointProjection } from './Geometry';\nimport { IHistory, useHistory } from './History/useHistory';\n\nexport type IToolType = 'wall' | 'cursor' | 'move' | 'pencil' | 'eraser' | 'destroy';\n\nexport type Point = {\n    x: number;\n    y: number;\n    editId?: number;\n};\n\nexport type Line = {\n    id: string;\n    p1: Point;\n    p2: Point;\n    editId?: number;\n};\n\nexport type IWallType = 'wall' | 'window' | 'door' | 'ruler';\n\nexport type Wall = Line & {\n    topText?: string;\n    bottomText?: string;\n    type?: IWallType;\n    variant?: string;\n};\n\nexport type IPlan = {\n    walls: Wall[];\n    notes: IDrawPathOptions[];\n};\n\nexport type ISettings = {\n    stylusMode: boolean;\n    magneticMode: boolean;\n    wallAlignmentMode: boolean;\n    selectedTool: IToolType;\n};\n\nexport type IGlobalState = {\n    settings: ISettings;\n    pointerDown: boolean;\n    selectedWall?: Wall;\n    scale: number;\n    plan: IPlan;\n};\n\nexport type IGlobalContext = {\n    drawing: IDrawing;\n    drawingRef: React.RefObject<SVGSVGElement>;\n    interactiveRef: React.RefObject<HTMLDivElement>;\n\n    control: Control<IGlobalState, object>;\n    getValues: UseFormGetValues<IGlobalState>;\n    setValue: UseFormSetValue<IGlobalState>;\n\n    commandsHistory: IHistory;\n};\n\nexport function saveSettings(settings: ISettings) {\n    localStorage.setItem('settings', JSON.stringify(settings));\n}\n\nexport function loadSettings() {\n    const defaultSettings = {\n        stylusMode: true,\n        magneticMode: true,\n        wallAlignmentMode: true,\n        selectedTool: 'wall',\n    };\n    try {\n        const json = localStorage.getItem('settings');\n        if (!json) return defaultSettings;\n        return JSON.parse(json);\n    } catch {}\n    return defaultSettings;\n}\n\nexport function savePlan(plan: IPlan) {\n    // console.log('Store plan', plan);\n    localStorage.setItem('plan', JSON.stringify(plan));\n}\n\nexport function loadPlan(): IPlan {\n    const defaultPlan = {\n        walls: [],\n        notes: [],\n    };\n    try {\n        const json = localStorage.getItem('plan');\n        if (!json) return defaultPlan;\n        const plan = JSON.parse(json);\n        console.log('Restore plan', plan);\n        return plan;\n    } catch {\n        console.log('Failed to restore plan');\n    }\n    return defaultPlan;\n}\n\nexport function drawPlan(drawing: IDrawing, plan: IPlan | undefined) {\n    plan?.walls?.forEach((w) => drawWall(drawing, w));\n    plan?.notes?.forEach((n) => drawing.drawPath(n));\n}\n\nexport function erasePlan(drawing: IDrawing, plan: IPlan) {\n    plan.walls?.forEach((w) => drawing.removeElement(wallGroupId(w)));\n    plan.notes?.filter((n) => n.id).forEach((n) => drawing.removeElement(n.id!));\n}\n\nconst defaultState: IGlobalState = {\n    settings: loadSettings(),\n    pointerDown: false,\n    scale: 1,\n    plan: loadPlan(),\n};\n\nexport function useGlobalState(): IGlobalContext {\n    const { control, getValues, setValue } = useForm<IGlobalState>({\n        defaultValues: defaultState,\n    });\n    const scale = defaultState.scale;\n    const plan = defaultState.plan;\n    console.log('useGlobalState', plan);\n\n    const { svgRef: drawingRef, drawing } = useDrawing(scale);\n    const commandsHistory = useHistory(drawing, plan);\n\n    useEffect(() => {\n        drawPlan(drawing, defaultState.plan);\n    }, [drawing]);\n\n    const interactiveRef = useRef<HTMLDivElement>(null);\n    const context: IGlobalContext = {\n        drawing,\n        drawingRef,\n        interactiveRef,\n\n        control,\n        getValues,\n        setValue,\n\n        commandsHistory,\n    };\n    return context;\n}\n\nexport const GlobalContext = React.createContext<IGlobalContext>(null!);\n\nexport const useGlobalContext = () => {\n    const context = React.useContext<IGlobalContext>(GlobalContext);\n    if (context === null) {\n        throw new Error('useGlobalContext must be used within an GlobalContext.Provider');\n    }\n    return context;\n};\n\nexport function getViewBox(ref: React.RefObject<SVGSVGElement>) {\n    const viewBox = ref.current\n        ?.getAttribute('viewBox')\n        ?.split(' ')\n        .map((x) => parseInt(x)) ?? [0, 0];\n    const size = ref.current!.getBoundingClientRect();\n    return {\n        x: viewBox[0],\n        y: viewBox[1],\n        width: viewBox[2],\n        height: viewBox[3],\n        ratio: size.width / viewBox[3],\n    };\n}\n\nexport function findNearPoints(plan: IPlan, x: number, y: number) {\n    return plan.walls\n        .flatMap((item) => [item.p1, item.p2])\n        .filter((p) => distanceBetween(p, { x, y }) <= wallCircleRadius);\n}\n\nexport function findNearWall(plan: IPlan, x: number, y: number) {\n    return plan.walls.find((w) => {\n        const p = pointProjection({ x, y }, w, true);\n        return p && distanceBetween({ x, y }, p) < wallCircleRadius;\n    });\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDelete(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,4H15.5L14.5,3H9.5L8.5,4H5V6H19M6,19C6,20.1 6.9,21 8,21H16C17.1,21 18,20.1 18,19V7H6V19Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDelete);\nexport default __webpack_public_path__ + \"static/media/delete.7a636e13.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRedo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M18.4,10.6C16.55,9 14.15,8 11.5,8C6.85,8 2.92,11.03 1.54,15.22L3.9,16C4.95,12.81 7.95,10.5 11.5,10.5C13.45,10.5 15.23,11.22 16.62,12.38L13,16H22V7L18.4,10.6Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRedo);\nexport default __webpack_public_path__ + \"static/media/redo.6a00d4af.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgUndo(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12.5,8C9.85,8 7.45,9 5.6,10.6L2,7V16H11L7.38,12.38C8.77,11.22 10.54,10.5 12.5,10.5C16.04,10.5 19.05,12.81 20.1,16L22.47,15.22C21.08,11.03 17.15,8 12.5,8Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgUndo);\nexport default __webpack_public_path__ + \"static/media/undo.7dd38719.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBackspaceO(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M19,15.59L17.59,17L14,13.41L10.41,17L9,15.59L12.59,12L9,8.41L10.41,7L14,10.59L17.59,7L19,8.41L15.41,12L19,15.59M22,3C23.1,3 24,3.9 24,5V19C24,20.1 23.1,21 22,21H7C6.31,21 5.77,20.64 5.41,20.11L0,12L5.41,3.88C5.77,3.35 6.31,3 7,3H22M22,5H7L2.28,12L7,19H22V5Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBackspaceO);\nexport default __webpack_public_path__ + \"static/media/backspace-o.8cd7e41c.svg\";\nexport { ForwardRef as ReactComponent };","import clsx from 'clsx';\nimport React from 'react';\nimport './RoundButton.css';\n\ntype IRoundButtonProps = {\n    icon?: JSX.Element;\n    title?: string;\n    active?: boolean;\n    className?: string;\n    onClick: () => void;\n};\n\nexport const RoundButton: React.FC<IRoundButtonProps> = ({\n    icon,\n    title,\n    active,\n    className,\n    children,\n    onClick,\n}) => {\n    return (\n        <div\n            role=\"button\"\n            title={title}\n            className={clsx('roundButton', active && 'roundButtonActive', className)}\n            onClick={onClick}\n        >\n            {icon}\n            {children}\n        </div>\n    );\n};\n","import { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { ReactComponent as TrashIcon } from '../../assets/icons/delete.svg';\nimport { ReactComponent as RedoIcon } from '../../assets/icons/redo.svg';\nimport { ReactComponent as UndoIcon } from '../../assets/icons/undo.svg';\nimport { erasePlan, savePlan, useGlobalContext } from '../GlobalContext';\nimport { RoundButton } from '../RoundButton/RoundButton';\nimport './HistoryPanel.css';\n\nexport const HistoryPanel: React.FC = () => {\n    const { drawing, commandsHistory, control } = useGlobalContext();\n    const plan = useWatch({ control, name: 'plan' });\n\n    const clear = () => {\n        // eslint-disable-next-line no-restricted-globals\n        if (confirm('Are you sure want to delete all?')) {\n            commandsHistory.clear();\n            erasePlan(drawing, plan);\n            plan.walls = [];\n            plan.notes = [];\n            savePlan(plan);\n        }\n    };\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            if (e.ctrlKey || e.metaKey) {\n                if (e.code === 'KeyZ') {\n                    commandsHistory.undo();\n                } else if (e.code === 'KeyY') {\n                    commandsHistory.redo();\n                }\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return () => document.removeEventListener('keydown', handleKeyDown);\n    }, [commandsHistory]);\n\n    return (\n        <div className=\"historyPanel\">\n            <RoundButton title=\"Undo\" onClick={commandsHistory.undo} icon={<UndoIcon />} />\n            <RoundButton title=\"Redo\" onClick={commandsHistory.redo} icon={<RedoIcon />} />\n            <RoundButton title=\"Clear\" onClick={clear} icon={<TrashIcon />} />\n        </div>\n    );\n};\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSwap(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M9,3L5,7H8V14H10V7H13M16,17V10H14V17H11L15,21L19,17H16Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSwap);\nexport default __webpack_public_path__ + \"static/media/swap.c40a007a.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgDoor(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M8,3C6.89,3 6,3.89 6,5V21H18V5C18,3.89 17.11,3 16,3H8M8,5H16V19H8V5M13,11V13H15V11H13Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgDoor);\nexport default __webpack_public_path__ + \"static/media/door.a2cd5a45.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgRuler(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M1.39,18.36L3.16,16.6L4.58,18L5.64,16.95L4.22,15.54L5.64,14.12L8.11,16.6L9.17,15.54L6.7,13.06L8.11,11.65L9.53,13.06L10.59,12L9.17,10.59L10.59,9.17L13.06,11.65L14.12,10.59L11.65,8.11L13.06,6.7L14.47,8.11L15.54,7.05L14.12,5.64L15.54,4.22L18,6.7L19.07,5.64L16.6,3.16L18.36,1.39L22.61,5.64L5.64,22.61L1.39,18.36Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgRuler);\nexport default __webpack_public_path__ + \"static/media/ruler.d0d989e2.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWall(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M3,16H12V21H3V16M2,10H8V15H2V10M9,10H15V15H9V10M16,10H22V15H16V10M13,16H21V21H13V16M3,4H11V9H3V4M12,4H21V9H12V4Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWall);\nexport default __webpack_public_path__ + \"static/media/wall.c667f643.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgWindow(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21,20V2H3V20H1V23H23V20M19,4V11H13V4M5,4H11V11H5M5,20V13H11V20M13,20V13H19V20Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgWindow);\nexport default __webpack_public_path__ + \"static/media/window.b0678f4a.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgExport(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,1L8,5H11V14H13V5H16M18,23H6C4.89,23 4,22.1 4,21V9C4,7.9 4.9,7 6,7H9V9H6V21H18V9H15V7H18C19.1,7 20,7.9 20,9V21C20,22.1 19.1,23 18,23Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgExport);\nexport default __webpack_public_path__ + \"static/media/export.cb857d46.svg\";\nexport { ForwardRef as ReactComponent };","import clsx from 'clsx';\nimport React from 'react';\nimport { ReactComponent as DoorIcon } from '../../assets/icons/door.svg';\nimport { ReactComponent as RulerIcon } from '../../assets/icons/ruler.svg';\nimport { ReactComponent as WallIcon } from '../../assets/icons/wall.svg';\nimport { ReactComponent as WindowIcon } from '../../assets/icons/window.svg';\nimport { IWallType } from '../GlobalContext';\nimport './WallTypeSelector.css';\n\ntype IWallTypeSelectorProps = {\n    wallType?: IWallType;\n    variant?: string;\n    onSubmit: (type: IWallType, variant?: string) => void;\n};\n\nexport const WallTypeSelector: React.FC<IWallTypeSelectorProps> = ({\n    wallType = 'wall',\n    variant,\n    onSubmit,\n}) => {\n    const WallButton: React.FC<{ type: IWallType; icon: React.ReactElement }> = ({\n        type,\n        icon,\n    }) => (\n        <button\n            className={clsx('wall-type-button', wallType === type && 'wall-type-active-button')}\n            onClick={() => {\n                if (type === 'door' && wallType === 'door') {\n                    const nextVariant = ((parseInt(variant ?? '1') || 1 + 1) % 4) + 1;\n                    onSubmit(type, nextVariant.toString());\n                } else {\n                    onSubmit(type);\n                }\n            }}\n        >\n            {icon}\n        </button>\n    );\n    return (\n        <div className=\"wall-types-container\">\n            <WallButton type=\"wall\" icon={<WallIcon width={18} height={18} />} />\n            <WallButton type=\"window\" icon={<WindowIcon width={14} height={14} />} />\n            <WallButton type=\"door\" icon={<DoorIcon width={18} height={18} />} />\n            <WallButton type=\"ruler\" icon={<RulerIcon width={16} height={16} />} />\n        </div>\n    );\n};\n","import clsx from 'clsx';\nimport cloneDeep from 'lodash.clonedeep';\nimport React, { useEffect, useState } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { ReactComponent as BackspaceIcon } from '../../assets/icons/backspace-o.svg';\nimport { ReactComponent as SwapIcon } from '../../assets/icons/swap.svg';\nimport { drawWall } from '../Draw';\nimport { getViewBox, useGlobalContext } from '../GlobalContext';\nimport './Keyboard.css';\nimport { WallTypeSelector } from './WallTypeSelector';\n\ntype INumberButtonProps = {\n    value: string;\n};\n\ntype IKeyboardProps = {\n    topText?: string;\n    bottomText?: string;\n    onSubmit?: (topText: string, bottomText: string) => void;\n};\n\ntype IActionButtonProps = {\n    value?: string;\n    title?: string;\n    icon?: React.ReactNode;\n    className?: string;\n    onClick: () => void;\n};\n\nconst ActionButton: React.FC<IActionButtonProps> = ({ icon, title, value, className, onClick }) => (\n    <button title={title} className={clsx('keyboard-button', className)} onClick={() => onClick()}>\n        {icon ?? value}\n    </button>\n);\n\nconst Keyboard: React.FC<IKeyboardProps> = ({ topText, bottomText, onSubmit = () => {} }) => {\n    const [selectedInput, setSelectedInput] = useState(!topText && bottomText ? 1 : 0);\n    const [text1, setText1] = useState(topText ?? '');\n    const [text2, setText2] = useState(bottomText ?? '');\n    const setText = selectedInput === 0 ? setText1 : setText2;\n\n    useEffect(() => {\n        setText1(topText ?? '');\n        setText2(bottomText ?? '');\n    }, [topText, bottomText]);\n\n    const handleSubmit = () => onSubmit(text1, text2);\n    const handleBackspace = () => setText((prev) => prev.substring(0, prev.length - 1));\n\n    const handleKeyDown: React.KeyboardEventHandler = (e) => {\n        if ('0123456789'.includes(e.key)) {\n            setText((prev) => prev + e.key);\n        } else if (e.key === 'Backspace') {\n            handleBackspace();\n        } else if (e.key === 'Enter') {\n            handleSubmit();\n        }\n    };\n\n    const NumberButton: React.FC<INumberButtonProps> = ({ value }) => (\n        <button\n            title={value}\n            className=\"keyboard-button\"\n            onClick={() => setText((prev) => prev + value)}\n        >\n            {value}\n        </button>\n    );\n\n    return (\n        <div>\n            <table className=\"keyboard\">\n                <tbody>\n                    <tr>\n                        <td colSpan={2} className=\"keyboard-input-cell\">\n                            <div\n                                tabIndex={0}\n                                onKeyDown={handleKeyDown}\n                                onClick={() => setSelectedInput(0)}\n                                className={clsx(\n                                    'keyboard-input',\n                                    selectedInput === 0 && 'keyboard-active-input',\n                                    !text1 && 'keyboard-empty-input',\n                                )}\n                            >\n                                <span>{text1 || 'Top'}</span>\n                            </div>\n                        </td>\n                        <td>\n                            <ActionButton\n                                title=\"Swap\"\n                                icon={<SwapIcon width={18} height={18} />}\n                                onClick={() => {\n                                    setText1(text2);\n                                    setText2(text1);\n                                }}\n                            />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colSpan={2} className={'keyboard-input-cell'}>\n                            <div\n                                tabIndex={0}\n                                onKeyDown={handleKeyDown}\n                                onClick={() => setSelectedInput(1)}\n                                className={clsx(\n                                    'keyboard-input',\n                                    selectedInput === 1 && 'keyboard-active-input',\n                                    !text2 && 'keyboard-empty-input',\n                                )}\n                            >\n                                <span>{text2 || 'Bottom'}</span>\n                            </div>\n                        </td>\n                        <td>\n                            <ActionButton\n                                title=\"Backspace\"\n                                icon={<BackspaceIcon width={16} height={16} />}\n                                onClick={() => setText((p) => p.substring(0, p.length - 1))}\n                            />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <NumberButton value=\"7\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"8\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"9\" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <NumberButton value=\"4\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"5\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"6\" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td>\n                            <NumberButton value=\"1\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"2\" />\n                        </td>\n                        <td>\n                            <NumberButton value=\"3\" />\n                        </td>\n                    </tr>\n                    <tr>\n                        <td colSpan={2}>\n                            <NumberButton value=\"0\" />\n                        </td>\n                        <td className=\"keyboard-submit\">\n                            <ActionButton value=\"OK\" onClick={handleSubmit} />\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </div>\n    );\n};\n\nexport const MiniKeyboard: React.FC = () => {\n    const { control, drawingRef, drawing, commandsHistory, setValue } = useGlobalContext();\n    const selectedWall = useWatch({ control, name: 'selectedWall' });\n    const scale = useWatch({ control, name: 'scale' });\n    const plan = useWatch({ control, name: 'plan' });\n    if (!selectedWall) {\n        return null;\n    }\n\n    const viewBox = getViewBox(drawingRef);\n    const cx = ((selectedWall.p1.x + selectedWall.p2.x) / 2 - viewBox.x) / scale;\n    const cy = ((selectedWall.p1.y + selectedWall.p2.y) / 2 - viewBox.y) / scale;\n    return (\n        <div className=\"mini-keyboard\" style={{ top: `${cy + 5}px`, left: `${cx + 5}px` }}>\n            <WallTypeSelector\n                wallType={selectedWall.type}\n                variant={selectedWall.variant}\n                onSubmit={(type, variant) => {\n                    const wall = plan.walls.find((w) => w.id === selectedWall.id);\n                    if (wall) {\n                        wall.type = type;\n                        wall.variant = variant;\n                        commandsHistory.add({\n                            tool: 'cursor',\n                            data: {\n                                before: [cloneDeep(selectedWall)],\n                                after: [cloneDeep(wall)],\n                            },\n                        });\n                        drawWall(drawing, wall);\n                    }\n                    setValue('selectedWall', { ...selectedWall, type, variant });\n                }}\n            />\n            <Keyboard\n                topText={selectedWall.topText}\n                bottomText={selectedWall.bottomText}\n                onSubmit={(topText, bottomText) => {\n                    const wall = plan.walls.find((w) => w.id === selectedWall.id);\n                    if (wall) {\n                        wall.topText = topText;\n                        wall.bottomText = bottomText;\n                        commandsHistory.add({\n                            tool: 'cursor',\n                            data: {\n                                before: [cloneDeep(selectedWall)],\n                                after: [cloneDeep(wall)],\n                            },\n                        });\n                        drawWall(drawing, wall);\n                    }\n                    setValue('selectedWall', undefined);\n                }}\n            />\n        </div>\n    );\n};\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { useGlobalContext } from './GlobalContext';\n\nconst PreventTouch: React.FC = () => {\n    const { control } = useGlobalContext();\n\n    const pointerDown = useWatch({ control, name: 'pointerDown' });\n\n    useEffect(() => {\n        const onTouchMove = (e: TouchEvent) => {\n            if (pointerDown) {\n                e.preventDefault();\n            }\n        };\n        document.addEventListener('touchmove', onTouchMove, { passive: false });\n        return () => {\n            document.removeEventListener('touchmove', onTouchMove);\n        };\n    }, [pointerDown]);\n\n    return null;\n};\n\nexport default PreventTouch;\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgFolderO(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20,18H4V8H20M20,6H12L10,4H4C2.89,4 2,4.89 2,6V18C2,19.1 2.9,20 4,20H20C21.1,20 22,19.1 22,18V8C22,6.89 21.1,6 20,6Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgFolderO);\nexport default __webpack_public_path__ + \"static/media/folder-o.23107641.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSave(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M15,9H5V5H15M12,19A3,3 0 0,1 9,16A3,3 0 0,1 12,13A3,3 0 0,1 15,16A3,3 0 0,1 12,19M17,3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V7L17,3Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSave);\nexport default __webpack_public_path__ + \"static/media/save.57c75de6.svg\";\nexport { ForwardRef as ReactComponent };","export const saveSvg = function (svg: SVGSVGElement) {\n    var clone = svg.cloneNode(true);\n    var svgDocType = document.implementation.createDocumentType(\n        'svg',\n        '-//W3C//DTD SVG 1.1//EN',\n        'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd',\n    );\n    var svgDoc = document.implementation.createDocument(\n        'http://www.w3.org/2000/svg',\n        'svg',\n        svgDocType,\n    );\n    svgDoc.replaceChild(clone, svgDoc.documentElement);\n    var svgData = new XMLSerializer().serializeToString(svgDoc);\n\n    downloadFile(\n        svgData.replace(/></g, '>\\n\\r<'),\n        `Plan ${new Date().toLocaleDateString()}.svg`,\n        'image/svg+xml',\n    );\n};\n\nexport function downloadFile(content: any, fileName: string, contentType: string) {\n    var a = document.createElement('a');\n    var file = new Blob([content], { type: contentType });\n    a.href = URL.createObjectURL(file);\n    a.download = fileName;\n    a.click();\n    a.remove();\n}\n\nexport function uploadFile(onLoad: (result?: string | null) => void) {\n    const input = document.createElement('input');\n    input.type = 'file';\n    input.onchange = (e) => {\n        if (!input.files || input.files.length === 0) return;\n        const file = input.files[0];\n        const reader = new FileReader();\n        reader.readAsText(file, 'UTF-8');\n        reader.onload = (readerEvent) => {\n            const content = readerEvent.target?.result as string | null;\n            onLoad(content);\n        };\n    };\n    input.click();\n}\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSettings(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,15.5C10.07,15.5 8.5,13.93 8.5,12C8.5,10.07 10.07,8.5 12,8.5C13.93,8.5 15.5,10.07 15.5,12C15.5,13.93 13.93,15.5 12,15.5M19.43,12.97C19.47,12.65 19.5,12.33 19.5,12C19.5,11.67 19.47,11.34 19.43,11L21.54,9.37C21.73,9.22 21.78,8.95 21.66,8.73L19.66,5.27C19.54,5.05 19.27,4.96 19.05,5.05L16.56,6.05C16.04,5.66 15.5,5.32 14.87,5.07L14.5,2.42C14.46,2.18 14.25,2 14,2H10C9.75,2 9.54,2.18 9.5,2.42L9.13,5.07C8.5,5.32 7.96,5.66 7.44,6.05L4.95,5.05C4.73,4.96 4.46,5.05 4.34,5.27L2.34,8.73C2.21,8.95 2.27,9.22 2.46,9.37L4.57,11C4.53,11.34 4.5,11.67 4.5,12C4.5,12.33 4.53,12.65 4.57,12.97L2.46,14.63C2.27,14.78 2.21,15.05 2.34,15.27L4.34,18.73C4.46,18.95 4.73,19.03 4.95,18.95L7.44,17.94C7.96,18.34 8.5,18.68 9.13,18.93L9.5,21.58C9.54,21.82 9.75,22 10,22H14C14.25,22 14.46,21.82 14.5,21.58L14.87,18.93C15.5,18.67 16.04,18.34 16.56,17.94L19.05,18.95C19.27,19.03 19.54,18.95 19.66,18.73L21.66,15.27C21.78,15.05 21.73,14.78 21.54,14.63L19.43,12.97Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSettings);\nexport default __webpack_public_path__ + \"static/media/settings.b0a05d35.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { ReactComponent as ExportIcon } from '../../assets/icons/export.svg';\nimport { ReactComponent as OpenIcon } from '../../assets/icons/folder-o.svg';\nimport { ReactComponent as SaveIcon } from '../../assets/icons/save.svg';\nimport { downloadFile, saveSvg, uploadFile } from '../../utils/svg/save';\nimport { drawPlan, erasePlan, IPlan, savePlan, useGlobalContext } from '../GlobalContext';\nimport { RoundButton } from '../RoundButton/RoundButton';\nimport './FileActions.css';\n\ntype IFileActionsProps = {};\n\nexport const FileActions: React.FC<IFileActionsProps> = () => {\n    const { drawing, drawingRef, control } = useGlobalContext();\n    const plan = useWatch({ control, name: 'plan' });\n\n    const exportSvg = useCallback(() => saveSvg(drawingRef.current!), [drawingRef]);\n\n    const saveJson = useCallback(() => {\n        const json = JSON.stringify(plan);\n        downloadFile(json, `Plan ${new Date().toLocaleDateString()}.json`, 'text/plain');\n    }, [plan]);\n\n    const loadJson = useCallback(() => {\n        uploadFile((json) => {\n            try {\n                if (!json) return;\n                erasePlan(drawing, plan);\n                const parsedPlan = JSON.parse(json) as IPlan;\n                console.log('Load JSON', parsedPlan);\n                plan.walls = parsedPlan.walls ?? [];\n                plan.notes = parsedPlan.notes ?? [];\n                drawPlan(drawing, parsedPlan);\n                savePlan(parsedPlan);\n            } catch {\n                console.log('Failed to load plan');\n            }\n        });\n    }, [plan, drawing]);\n\n    return (\n        <div className=\"fileActionsContainer\">\n            <RoundButton icon={<OpenIcon />} onClick={loadJson} title=\"Open\" />\n            <RoundButton icon={<SaveIcon />} onClick={saveJson} title=\"Save\" />\n            <RoundButton icon={<ExportIcon />} onClick={exportSvg} title=\"Export\" />\n        </div>\n    );\n};\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { saveSettings, useGlobalContext } from '../GlobalContext';\nimport './Settings.css';\n\nexport const Settings: React.FC = () => {\n    const { control, setValue } = useGlobalContext();\n    const settings = useWatch({ control, name: 'settings' });\n    const { stylusMode, magneticMode, wallAlignmentMode } = settings;\n\n    useEffect(() => {\n        saveSettings(settings);\n    }, [settings]);\n\n    return (\n        <div className=\"settingsList\">\n            <div className=\"settingsHeader\">\n                <h2>Settings</h2>\n            </div>\n            <div>\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={stylusMode ?? false}\n                        onChange={(e) => setValue('settings.stylusMode', e.target.checked)}\n                    />\n                    Stylus mode\n                </label>\n            </div>\n            <div>\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={wallAlignmentMode ?? false}\n                        onChange={(e) => setValue('settings.wallAlignmentMode', e.target.checked)}\n                    />\n                    Walls alignment\n                </label>\n            </div>\n\n            <div>\n                <label>\n                    <input\n                        type=\"checkbox\"\n                        checked={magneticMode ?? false}\n                        onChange={(e) => setValue('settings.magneticMode', e.target.checked)}\n                    />\n                    Magnet mode\n                </label>\n            </div>\n        </div>\n    );\n};\n","import React from 'react';\nimport './TodoList.css';\n\nexport const TodoList: React.FC = () => {\n    return (\n        <div className=\"todoListPanel\">\n            <div className=\"todoListHeader\">\n                <h2>Todo list</h2>\n            </div>\n            <ol className=\"todoList\">\n                <li>custom zoom</li>\n                <li>add cutter tool</li>\n                <li>translate app</li>\n                <li>store history</li>\n                <li>keyboard fix</li>\n                <li>pen color, width</li>\n            </ol>\n        </div>\n    );\n};\n","import React, { useState } from 'react';\nimport { FileActions } from '../FileActions/FileActions';\nimport { RoundButton } from '../RoundButton/RoundButton';\nimport { ReactComponent as SettingsIcon } from '../../assets/icons/settings.svg';\nimport { Settings } from './Settings';\nimport { TodoList } from './TodoList';\nimport clsx from 'clsx';\n\nexport const SettingsPanel: React.FC = () => {\n    const [isOpen, setIsOpen] = useState(false);\n    return (\n        <div className=\"settingsPanel\">\n            <div className=\"settingsPanelButtons\">\n                <FileActions />\n                <RoundButton\n                    active={isOpen}\n                    title=\"Settings\"\n                    icon={<SettingsIcon />}\n                    onClick={() => setIsOpen((prev) => !prev)}\n                />\n            </div>\n            <div className={clsx('settingsContainer', !isOpen && 'settingsContainerHidden')}>\n                <div className=\"settingsPage\">\n                    <Settings />\n                    <TodoList />\n                </div>\n            </div>\n        </div>\n    );\n};\n","type TypedTouch = Touch & { touchType: 'stylus' | 'direct' };\n\nexport type ToolEvent = {\n    id: number;\n    x: number;\n    y: number;\n\n    type: 'mouse' | 'stylus' | 'touch';\n    buttons?: number;\n    touches: TypedTouch[];\n    changedTouches: TypedTouch[];\n};\n\nexport type ToolEventHandler = (e: ToolEvent) => void;\n\nexport function registerTool(\n    element: HTMLElement,\n    onStart: ToolEventHandler,\n    onMove: ToolEventHandler,\n    onEnd: ToolEventHandler,\n) {\n    function mouseToToolEvent(e: MouseEvent): ToolEvent {\n        const touches = [\n            {\n                identifier: 1,\n                pageX: e.pageX,\n                pageY: e.pageY,\n            } as TypedTouch,\n        ];\n        return {\n            id: 1,\n            x: e.pageX,\n            y: e.pageY,\n            type: 'mouse',\n            buttons: e.buttons,\n            changedTouches: touches,\n            touches,\n        };\n    }\n    const onMouseDown = (e: MouseEvent) => onStart(mouseToToolEvent(e));\n    const onMouseMove = (e: MouseEvent) => onMove(mouseToToolEvent(e));\n    const onMouseUp = (e: MouseEvent) => onEnd(mouseToToolEvent(e));\n\n    function touchToToolEvent(e: TouchEvent): ToolEvent {\n        const touch = e.changedTouches[0] as TypedTouch;\n        return {\n            id: touch.identifier,\n            x: touch.pageX,\n            y: touch.pageY,\n            touches: Array.from(e.touches) as TypedTouch[],\n            changedTouches: Array.from(e.changedTouches) as TypedTouch[],\n            type: touch.touchType === 'stylus' ? 'stylus' : 'touch',\n        };\n    }\n    const onTouchStart = (e: TouchEvent) => onStart(touchToToolEvent(e));\n    const onTouchMove = (e: TouchEvent) => onMove(touchToToolEvent(e));\n    const onTouchEnd = (e: TouchEvent) => onEnd(touchToToolEvent(e));\n\n    element.addEventListener('mousedown', onMouseDown);\n    element.addEventListener('mousemove', onMouseMove);\n    element.addEventListener('mouseup', onMouseUp);\n\n    element.addEventListener('touchstart', onTouchStart);\n    element.addEventListener('touchmove', onTouchMove);\n    element.addEventListener('touchend', onTouchEnd);\n\n    return () => {\n        element.removeEventListener('mousedown', onMouseDown);\n        element.removeEventListener('mousemove', onMouseMove);\n        element.removeEventListener('mouseup', onMouseUp);\n\n        element.removeEventListener('touchstart', onTouchStart);\n        element.removeEventListener('touchmove', onTouchMove);\n        element.removeEventListener('touchend', onTouchEnd);\n    };\n}\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { drawGuideLines, drawWall, removeGuideLines, wallCircleRadius } from '../Draw';\nimport { distanceBetween, findAllGuideLines } from '../Geometry';\nimport { findNearPoints, findNearWall, getViewBox, useGlobalContext, Wall } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nfunction cloneEditingWalls(walls: Wall[]): Wall[] {\n    return walls\n        .filter((w) => w.p1.editId || w.p2.editId)\n        .map((w) => {\n            const clone: Wall = {\n                id: w.id,\n                topText: w.topText,\n                bottomText: w.bottomText,\n                p1: { x: w.p1.x, y: w.p1.y },\n                p2: { x: w.p2.x, y: w.p2.y },\n            };\n            return clone;\n        });\n}\n\nfunction areWallsCoordinatesEqual(w1: Wall, w2: Wall) {\n    return w1.p1.x === w2.p1.x && w1.p1.y === w2.p1.y && w1.p2.x === w2.p2.x && w1.p2.y === w2.p2.y;\n}\n\nexport const CursorTool: React.FC = () => {\n    const { commandsHistory, interactiveRef, drawingRef, drawing, control, setValue } =\n        useGlobalContext();\n    const { stylusMode, magneticMode, wallAlignmentMode, selectedTool } = useWatch({\n        control,\n        name: 'settings',\n    });\n    const scale = useWatch({ control, name: 'scale' });\n    const plan = useWatch({ control, name: 'plan' });\n\n    useEffect(() => {\n        if (!interactiveRef.current || selectedTool !== 'cursor') return;\n        interactiveRef.current.style.cursor = 'default';\n\n        let _wallBefore: Wall[] = [];\n        let _hoverWall: Wall | undefined;\n        let _selectedWall: Wall | undefined;\n\n        const onStart = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            setValue('pointerDown', true);\n            const viewBox = getViewBox(drawingRef);\n            e.changedTouches?.forEach((touch) => {\n                const id = touch.identifier;\n                const x = viewBox.x + touch.pageX * scale;\n                const y = viewBox.y + touch.pageY * scale;\n                const points = findNearPoints(plan, x, y);\n                points.forEach((p) => {\n                    p.editId = id;\n                });\n\n                // Select wall if no editing points\n                const newSelectedWall = points.length === 0 ? findNearWall(plan, x, y) : undefined;\n                if (_selectedWall) drawWall(drawing, _selectedWall);\n                _selectedWall = newSelectedWall;\n                if (_selectedWall) drawWall(drawing, _selectedWall, '#00f');\n                setValue('selectedWall', _selectedWall);\n\n                if (points.length > 0) {\n                    interactiveRef.current!.style.cursor = 'move';\n                }\n                _wallBefore = cloneEditingWalls(plan.walls);\n            });\n        };\n\n        const onMove = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const viewBox = getViewBox(drawingRef);\n            if (e.type === 'mouse') {\n                const x = viewBox.x + e.x * scale;\n                const y = viewBox.y + e.y * scale;\n                if (_hoverWall && _hoverWall !== _selectedWall) drawWall(drawing, _hoverWall);\n                _hoverWall = findNearWall(plan, x, y);\n                if (findNearPoints(plan, x, y).length > 0) {\n                    interactiveRef.current!.style.cursor = e.buttons ? 'move' : 'pointer';\n                } else if (_hoverWall) {\n                    drawWall(drawing, _hoverWall, 'blue');\n                    interactiveRef.current!.style.cursor = 'pointer';\n                } else {\n                    interactiveRef.current!.style.cursor = 'default';\n                }\n            }\n            e.changedTouches?.forEach((touch) => {\n                const id = touch.identifier;\n                const x = viewBox.x + touch.pageX * scale;\n                const y = viewBox.y + touch.pageY * scale;\n                const editingPoints = plan.walls\n                    .flatMap((w) => [w.p1, w.p2])\n                    .filter((p) => p.editId === id);\n                editingPoints.forEach((p) => {\n                    p.x = x;\n                    p.y = y;\n                });\n                if (magneticMode && editingPoints.length > 0) {\n                    const guidLines = findAllGuideLines(plan.walls, editingPoints, { x, y });\n                    drawGuideLines(drawing, editingPoints[0], guidLines);\n                }\n                plan.walls\n                    .filter((w) => w.p1.editId || w.p2.editId)\n                    .forEach((w) => drawWall(drawing, w));\n            });\n        };\n\n        const onEnd = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const viewBox = getViewBox(drawingRef);\n            if (e.type === 'mouse') {\n                const x = viewBox.x + e.x * scale;\n                const y = viewBox.x + e.y * scale;\n                if (findNearPoints(plan, x, y).length > 0 || findNearWall(plan, x, y)) {\n                    interactiveRef.current!.style.cursor = 'pointer';\n                } else {\n                    interactiveRef.current!.style.cursor = 'default';\n                }\n            }\n            e.changedTouches?.forEach((touch) => {\n                const id = touch.identifier;\n                plan.walls\n                    .flatMap((w) => [w.p1, w.p2])\n                    .filter((x) => x.editId === id)\n                    .forEach((p) => {\n                        if (magneticMode) {\n                            const closePoint = plan.walls\n                                .flatMap((w) => [w.p1, w.p2])\n                                .filter((o) => o !== p)\n                                .find((o) => distanceBetween(o, p) <= wallCircleRadius);\n                            if (closePoint) {\n                                p.x = closePoint.x;\n                                p.y = closePoint.y;\n                            }\n                        }\n                    });\n\n                const isAnyWallMoved =\n                    plan.walls\n                        .filter((w) => w.p1.editId || w.p2.editId)\n                        .filter((w) => {\n                            const w2 = _wallBefore.find((x) => x.id === w.id);\n                            return w2 && !areWallsCoordinatesEqual(w, w2);\n                        }).length > 0;\n\n                plan.walls\n                    .filter((w) => w.p1.editId || w.p2.editId)\n                    .forEach((w) => {\n                        w.p1.editId = undefined;\n                        w.p2.editId = undefined;\n                        drawWall(drawing, w);\n                    });\n\n                if (isAnyWallMoved) {\n                    commandsHistory.add({\n                        tool: 'cursor',\n                        data: {\n                            before: _wallBefore,\n                            after: cloneEditingWalls(plan.walls),\n                        },\n                    });\n                }\n                removeGuideLines(drawing, { editId: id, x: 0, y: 0 });\n            });\n            if (!e.touches || e.touches?.length === 0) {\n                setValue('pointerDown', false);\n            }\n        };\n\n        const unsubscribe = registerTool(interactiveRef.current, onStart, onMove, onEnd);\n        return () => {\n            unsubscribe();\n            if (_hoverWall) drawWall(drawing, _hoverWall);\n            if (_selectedWall) {\n                drawWall(drawing, _selectedWall);\n                setValue('selectedWall', undefined);\n            }\n        };\n    }, [\n        scale,\n        stylusMode,\n        magneticMode,\n        wallAlignmentMode,\n        commandsHistory,\n        interactiveRef,\n        selectedTool,\n        plan.walls,\n        drawingRef,\n        drawing,\n        plan,\n        setValue,\n    ]);\n\n    return null;\n};\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgBulldozer(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M4,4C3.45,4 3,4.45 3,5V10C2.54,10 2.14,10.31 2.03,10.76V13.97H2.29C2.65,13.37 3.3,13 4,13H13C13.7,13 14.35,13.37 14.71,13.97H16.03L16,11V11C16,10.45 15.55,10 15,10H13V8C13,7.45 12.55,7 12,7C11.45,7 11,7.45 11,8V10H9V5C9,4.45 8.55,4 8,4H4M5,6H7V10L7,11H5V6M17,11V19H22V18L19,17L18,11H17M4,15C2.9,15 2,15.9 2,17C2,18.1 2.9,19 4,19H13C14.1,19 15,18.1 15,17C15,15.9 14.1,15 13,15H4Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgBulldozer);\nexport default __webpack_public_path__ + \"static/media/bulldozer.ba24669e.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { drawCircle, drawWall, wallGroupId } from '../Draw';\nimport { crossLines } from '../Geometry';\nimport { findNearWall, getViewBox, Point, useGlobalContext, Wall } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nexport const DestroyTool: React.FC = () => {\n    const { commandsHistory, interactiveRef, drawingRef, drawing, control, setValue } =\n        useGlobalContext();\n    const { stylusMode, selectedTool } = useWatch({ control, name: 'settings' });\n    const scale = useWatch({ control, name: 'scale' });\n    const plan = useWatch({ control, name: 'plan' });\n\n    useEffect(() => {\n        if (!interactiveRef.current || selectedTool !== 'destroy') return;\n        interactiveRef.current.style.cursor = 'crosshair';\n\n        let _startPoint: Point | undefined;\n        let _removingWalls: Wall[] = [];\n\n        const onStart = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            if (e.type === 'touch' && e.touches!.length > 1) {\n                return;\n            }\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            setValue('pointerDown', true);\n            _startPoint = { x, y, editId: e.id };\n        };\n\n        const onMove = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            _removingWalls.forEach((w) => {\n                drawWall(drawing, w);\n            });\n            _removingWalls = [];\n            if (e.type === 'mouse' && !e.buttons) {\n                const wall = findNearWall(plan, x, y);\n                if (wall) {\n                    _removingWalls.push(wall);\n                }\n                interactiveRef.current!.style.cursor = wall ? 'pointer' : 'crosshair';\n            }\n            if (_startPoint) {\n                drawing.createGroup('cross', 'walls');\n                drawing.drawLine({\n                    id: `d${e.id}`,\n                    x1: _startPoint.x,\n                    y1: _startPoint.y,\n                    x2: x,\n                    y2: y,\n                    stroke: 'red',\n                    strokeWidth: scale,\n                    groupId: 'cross',\n                });\n                const destroyLine = { id: `${e.id}`, p1: _startPoint, p2: { x, y } };\n                const crosses = plan.walls\n                    .map((w) => {\n                        const point = crossLines(w, destroyLine, true);\n                        return point ? { point, wall: w } : undefined;\n                    })\n                    .filter((x) => x);\n                const crossIds = crosses.map((item, i) => {\n                    const { point, wall } = item!;\n                    _removingWalls.push(wall);\n                    const crossId = `x${wall.id}`;\n                    drawCircle(drawing, crossId, 'cross', point.x, point.y, 5, 'red');\n                    return crossId;\n                });\n                drawing.removeElements(\n                    (e) => e.id.startsWith('x') && !crossIds.includes(e.id),\n                    'cross',\n                );\n            }\n            _removingWalls.forEach((w) => {\n                drawWall(drawing, w, 'red');\n            });\n        };\n\n        const onEnd = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            let destroyedWalls: Wall[] = [];\n            if (_startPoint) {\n                const destroyLine = { id: `${e.id}`, p1: _startPoint, p2: { x, y } };\n                destroyedWalls = plan.walls.filter((w) => crossLines(w, destroyLine, true));\n                drawing.removeElement('cross');\n            }\n            const wall = findNearWall(plan, x, y);\n            if (wall) {\n                destroyedWalls.push(wall);\n            }\n            destroyedWalls.forEach((w) => drawing.removeElement(wallGroupId(w)));\n            plan.walls = plan.walls.filter((w) => !destroyedWalls.includes(w));\n            _removingWalls = [];\n            commandsHistory.add({\n                tool: 'destroy',\n                data: { destroyedWalls },\n            });\n            _startPoint = undefined;\n            if (!e.touches || e.touches?.length === 0) {\n                setValue('pointerDown', false);\n            }\n        };\n\n        const unsubscribe = registerTool(interactiveRef.current, onStart, onMove, onEnd);\n        return () => {\n            unsubscribe();\n            drawing.removeElement('cross');\n            _removingWalls.forEach((w) => drawWall(drawing, w));\n        };\n    }, [\n        scale,\n        stylusMode,\n        commandsHistory,\n        interactiveRef,\n        selectedTool,\n        drawingRef,\n        drawing,\n        plan,\n        setValue,\n    ]);\n\n    return null;\n};\n","import React, { useEffect } from 'react';\nimport { distanceBetween } from '../Geometry';\nimport { Line, useGlobalContext } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nexport const HistoryTool: React.FC = () => {\n    const { commandsHistory, interactiveRef } = useGlobalContext();\n    useEffect(() => {\n        if (!interactiveRef.current) return;\n\n        let lastEnd = 0;\n        let lines: Line[] = [];\n\n        const onStart = (e: ToolEvent) => {\n            e.changedTouches?.forEach((touch) => {\n                const x = touch.pageX;\n                const y = touch.pageY;\n                const id = touch.identifier.toString();\n                if (!lines.find((l) => l.id === id)) {\n                    lines.push({ id, p1: { x, y }, p2: { x, y } });\n                }\n            });\n        };\n        const onMove = (e: ToolEvent) => {\n            e.changedTouches?.forEach((touch) => {\n                const x = touch.pageX;\n                const y = touch.pageY;\n                const id = touch.identifier.toString();\n                const line = lines.find((l) => l.id === id);\n                if (line) {\n                    line.p2.x = x;\n                    line.p2.y = y;\n                }\n            });\n        };\n        const onEnd = (e: ToolEvent) => {\n            const now = new Date().getTime();\n            const timeDiff = now - lastEnd;\n            lastEnd = now;\n            if (!e.touches || e.touches?.length > 0) {\n                return;\n            }\n            const notMoved = lines.filter((l) => distanceBetween(l.p1, l.p2) < 10).length;\n            if (timeDiff < 500 && lines.length === 2 && notMoved === 2) {\n                commandsHistory.undo();\n            } else if (timeDiff < 500 && lines.length === 3 && notMoved === 3) {\n                commandsHistory.redo();\n            }\n            lines = [];\n        };\n        return registerTool(interactiveRef.current, onStart, onMove, onEnd);\n    }, [commandsHistory, interactiveRef]);\n\n    return null;\n};\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { Point, useGlobalContext } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nexport const MoveTool: React.FC = () => {\n    const { interactiveRef, drawingRef, control, setValue } = useGlobalContext();\n    const { stylusMode, selectedTool } = useWatch({ control, name: 'settings' });\n    const scale = useWatch({ control, name: 'scale' });\n\n    useEffect(() => {\n        if (!interactiveRef.current || !drawingRef.current) {\n            return;\n        }\n        if (!stylusMode && selectedTool !== 'move') return;\n        if (selectedTool === 'move') {\n            interactiveRef.current.style.cursor = 'grab';\n        }\n\n        let _startPoint: Point | undefined;\n        let _startViewBox: Point | undefined;\n\n        const onStart = (e: ToolEvent) => {\n            if (stylusMode && e.type !== 'touch' && selectedTool !== 'move') return;\n            if (e.touches?.length === 1) {\n                const x = e.x * scale;\n                const y = e.y * scale;\n                _startPoint = { x, y };\n                const viewBox = drawingRef.current\n                    ?.getAttribute('viewBox')\n                    ?.split(' ')\n                    ?.map((x) => parseInt(x)) ?? [0, 0];\n                _startViewBox = { x: viewBox[0], y: viewBox[1] };\n                setValue('pointerDown', true);\n                interactiveRef.current!.style.cursor = 'grabbing';\n            }\n        };\n        const onMove = (e: ToolEvent) => {\n            if (stylusMode && e.type !== 'touch' && selectedTool !== 'move') return;\n            if (e.touches?.length === 1) {\n                const x = e.x * scale;\n                const y = e.y * scale;\n\n                if (!_startPoint || !_startViewBox) {\n                    return;\n                }\n                const vx = _startViewBox.x - (x - _startPoint.x);\n                const vy = _startViewBox.y - (y - _startPoint.y);\n\n                const size = drawingRef.current!.getBoundingClientRect();\n                const viewBox = drawingRef.current!.getAttribute('viewBox')?.split(' ') ?? [\n                    0,\n                    0,\n                    size.width,\n                    size.height,\n                ];\n                const value = `${vx} ${vy} ${viewBox[2]} ${viewBox[3]}`;\n                drawingRef.current?.setAttribute('viewBox', value);\n            }\n        };\n        const onEnd = (e: ToolEvent) => {\n            if (stylusMode && e.type !== 'touch' && selectedTool !== 'move') return;\n            _startPoint = undefined;\n            _startViewBox = undefined;\n            interactiveRef.current!.style.cursor = 'grab';\n            setValue('pointerDown', false);\n        };\n        return registerTool(interactiveRef.current, onStart, onMove, onEnd);\n    }, [drawingRef, interactiveRef, scale, selectedTool, stylusMode, setValue]);\n\n    return null;\n};\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { DrawPoint } from '../Draw';\nimport { getViewBox, useGlobalContext } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nexport const PenTool: React.FC = () => {\n    const { commandsHistory, interactiveRef, drawingRef, drawing, control, setValue } =\n        useGlobalContext();\n    const { stylusMode, magneticMode, selectedTool } = useWatch({ control, name: 'settings' });\n    const scale = useWatch({ control, name: 'scale' });\n    const plan = useWatch({ control, name: 'plan' });\n\n    useEffect(() => {\n        if (!interactiveRef.current) {\n            return;\n        }\n        switch (selectedTool) {\n            case 'pencil':\n                interactiveRef.current.style.cursor = 'crosshair';\n                break;\n            case 'eraser':\n                interactiveRef.current.style.cursor = 'url(\"/cursors/circle.svg\") 12 12, auto';\n                break;\n            default:\n                return;\n        }\n        let points: DrawPoint[] = [];\n        let id: string | undefined;\n\n        const getStrokeOptions = () => {\n            return {\n                strokeWidth: scale * (selectedTool === 'eraser' ? 15 : 1.5),\n                stroke: selectedTool === 'pencil' ? '#000' : '#fff',\n            };\n        };\n\n        const onStart = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            if (e.type === 'touch' && e.touches!.length > 1) return;\n            setValue('pointerDown', true);\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            const force = e.touches[0]?.force;\n            const pressure = force ? Number(force.toFixed(3)) : undefined;\n            points.push({ x, y, pressure });\n            const { stroke, strokeWidth } = getStrokeOptions();\n            id = drawing.drawPath({\n                points,\n                stroke,\n                strokeWidth,\n                groupId: 'pen',\n            });\n        };\n\n        const onMove = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            if (e.type === 'mouse' && !e.buttons) return;\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            const force = e.touches[0]?.force;\n            const pressure = force ? Number(force.toFixed(3)) : undefined;\n            points.push({ x, y, pressure });\n            const { strokeWidth } = getStrokeOptions();\n            drawing.drawPath({ id, points, strokeWidth });\n        };\n\n        const onEnd = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const strokeOptions = getStrokeOptions();\n            const path = { id, points, ...strokeOptions, groupId: 'pen' };\n            plan.notes.push(path);\n            commandsHistory.add({\n                tool: selectedTool as 'pencil' | 'eraser',\n                data: { options: path },\n            });\n            id = undefined;\n            points = [];\n            if (!e.touches || e.touches?.length === 0) {\n                setValue('pointerDown', false);\n            }\n        };\n\n        return registerTool(interactiveRef.current, onStart, onMove, onEnd);\n    }, [\n        scale,\n        stylusMode,\n        magneticMode,\n        interactiveRef,\n        commandsHistory,\n        selectedTool,\n        drawingRef,\n        drawing,\n        plan,\n        setValue,\n    ]);\n\n    return null;\n};\n","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgCursor(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M13.64,21.97C13.14,22.21 12.54,22 12.31,21.5L10.13,16.76L7.62,18.78C7.45,18.92 7.24,19 7,19A1,1 0 0,1 6,18V3A1,1 0 0,1 7,2C7.24,2 7.47,2.09 7.64,2.23L7.65,2.22L19.14,11.86C19.57,12.22 19.62,12.85 19.27,13.27C19.12,13.45 18.91,13.57 18.7,13.61L15.54,14.23L17.74,18.96C18,19.46 17.76,20.05 17.26,20.28L13.64,21.97Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgCursor);\nexport default __webpack_public_path__ + \"static/media/cursor.6ad06e7b.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEraser(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M16.24,3.56L21.19,8.5C21.97,9.29 21.97,10.55 21.19,11.34L12,20.53C10.44,22.09 7.91,22.09 6.34,20.53L2.81,17C2.03,16.21 2.03,14.95 2.81,14.16L13.41,3.56C14.2,2.78 15.46,2.78 16.24,3.56M4.22,15.58L7.76,19.11C8.54,19.9 9.8,19.9 10.59,19.11L14.12,15.58L9.17,10.63L4.22,15.58Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEraser);\nexport default __webpack_public_path__ + \"static/media/eraser.c1150c95.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgEye(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M12,9C10.34,9 9,10.34 9,12C9,13.66 10.34,15 12,15C13.66,15 15,13.66 15,12C15,10.34 13.66,9 12,9M12,17C9.24,17 7,14.76 7,12C7,9.24 9.24,7 12,7C14.76,7 17,9.24 17,12C17,14.76 14.76,17 12,17M12,4.5C7,4.5 2.73,7.61 1,12C2.73,16.39 7,19.5 12,19.5C17,19.5 21.27,16.39 23,12C21.27,7.61 17,4.5 12,4.5Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgEye);\nexport default __webpack_public_path__ + \"static/media/eye.b182d6af.svg\";\nexport { ForwardRef as ReactComponent };","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgPencil(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    width: 24,\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M20.71,7.04C21.1,6.65 21.1,6 20.71,5.63L18.37,3.29C18,2.9 17.35,2.9 16.96,3.29L15.12,5.12L18.87,8.87M3,17.25V21H6.75L17.81,9.93L14.06,6.18L3,17.25Z\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgPencil);\nexport default __webpack_public_path__ + \"static/media/pencil.15a7315d.svg\";\nexport { ForwardRef as ReactComponent };","import React, { useCallback, useEffect, useState } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport { ReactComponent as DestroyIcon } from '../../assets/icons/bulldozer.svg';\nimport { ReactComponent as CursorIcon } from '../../assets/icons/cursor.svg';\nimport { ReactComponent as EraserIcon } from '../../assets/icons/eraser.svg';\nimport { ReactComponent as MoveIcon } from '../../assets/icons/eye.svg';\nimport { ReactComponent as PencilIcon } from '../../assets/icons/pencil.svg';\nimport { ReactComponent as WallIcon } from '../../assets/icons/wall.svg';\nimport { IToolType, useGlobalContext } from '../GlobalContext';\nimport { RoundButton } from '../RoundButton/RoundButton';\nimport './Toolbox.css';\n\ntype IToolboxProps = {};\n\nexport const Toolbox: React.FC<IToolboxProps> = () => {\n    const { control, setValue } = useGlobalContext();\n    const selectedTool = useWatch({ control, name: 'settings.selectedTool' });\n    const [previousTool, setPreviousTool] = useState<IToolType>();\n\n    const setSelectedTool = useCallback(\n        (tool: IToolType) => {\n            setValue('settings.selectedTool', tool);\n        },\n        [setValue],\n    );\n\n    type IToolVoxItemProps = {\n        type: IToolType;\n        name: string;\n        icon?: JSX.Element;\n    };\n    const ToolBoxItem: React.FC<IToolVoxItemProps> = ({ type, name, icon }) => {\n        return (\n            <RoundButton\n                title={name}\n                active={selectedTool === type}\n                onClick={() => setSelectedTool(type)}\n            >\n                {icon ?? name}\n            </RoundButton>\n        );\n    };\n\n    useEffect(() => {\n        const handleKeyDown = (e: KeyboardEvent) => {\n            switch (e.code) {\n                case 'KeyW':\n                    setSelectedTool('wall');\n                    break;\n                case 'KeyD':\n                    setSelectedTool('destroy');\n                    break;\n                case 'KeyC':\n                    setSelectedTool('cursor');\n                    break;\n                case 'KeyP':\n                case 'KeyQ':\n                    setSelectedTool('pencil');\n                    break;\n                case 'KeyE':\n                    setSelectedTool('eraser');\n                    break;\n                case 'KeyM':\n                    setSelectedTool('move');\n                    break;\n                case 'Space':\n                    if (selectedTool !== 'move') {\n                        setPreviousTool(selectedTool);\n                        setSelectedTool('move');\n                    }\n                    break;\n            }\n        };\n        document.addEventListener('keydown', handleKeyDown);\n        return () => document.removeEventListener('keydown', handleKeyDown);\n    }, [selectedTool, setSelectedTool]);\n\n    useEffect(() => {\n        const handleKeyUp = (e: KeyboardEvent) => {\n            if (e.code === 'Space' && previousTool) {\n                setSelectedTool(previousTool);\n            }\n        };\n        document.addEventListener('keyup', handleKeyUp);\n        return () => document.removeEventListener('keyup', handleKeyUp);\n    }, [previousTool, setSelectedTool]);\n\n    return (\n        <div className=\"toolboxContainer\">\n            <ToolBoxItem type=\"wall\" name=\"Wall\" icon={<WallIcon />} />\n            <ToolBoxItem type=\"destroy\" name=\"Destroy\" icon={<DestroyIcon />} />\n            <ToolBoxItem type=\"cursor\" name=\"Cursor\" icon={<CursorIcon />} />\n            <ToolBoxItem type=\"pencil\" name=\"Pencil\" icon={<PencilIcon />} />\n            <ToolBoxItem type=\"eraser\" name=\"Eraser\" icon={<EraserIcon />} />\n            <ToolBoxItem type=\"move\" name=\"Move\" icon={<MoveIcon />} />\n        </div>\n    );\n};\n","import React, { useEffect } from 'react';\nimport { useWatch } from 'react-hook-form';\nimport {\n    drawGuideLines,\n    drawWall,\n    drawWallStart,\n    removeGuideLines,\n    wallCircleRadius,\n    wallGroupId,\n} from '../Draw';\nimport { distanceBetween, findAlignedGuideLines, getWallOrientation } from '../Geometry';\nimport { getViewBox, Line, useGlobalContext } from '../GlobalContext';\nimport { registerTool, ToolEvent } from './ToolEvent';\n\nexport const WallTool: React.FC = () => {\n    const { commandsHistory, interactiveRef, drawingRef, drawing, control, setValue } =\n        useGlobalContext();\n    const { stylusMode, magneticMode, wallAlignmentMode, selectedTool } = useWatch({\n        control,\n        name: 'settings',\n    });\n    const scale = useWatch({ control, name: 'scale' });\n    const plan = useWatch({ control, name: 'plan' });\n\n    useEffect(() => {\n        if (!interactiveRef.current || selectedTool !== 'wall') {\n            return;\n        }\n        interactiveRef.current.style.cursor = 'crosshair';\n\n        const cancel = (id: number) => {\n            const wallIndex = plan.walls.findIndex((x) => x.editId === id);\n            if (wallIndex >= 0) {\n                const walls = plan.walls.splice(wallIndex, 1);\n                drawing.removeElement(wallGroupId(walls[0]));\n                walls[0].editId = undefined;\n            }\n        };\n\n        const onStart = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            if (e.type === 'touch' && e.touches.length > 1) {\n                setValue('pointerDown', false);\n                cancel(e.touches[0].identifier);\n                return;\n            }\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            setValue('pointerDown', true);\n            const wallId =\n                plan.walls.length > 0\n                    ? Math.max.apply(\n                          null,\n                          plan.walls.map((w) => parseInt(w.id)),\n                      ) + 1\n                    : 1;\n            const wall: Line = {\n                id: `${wallId}`,\n                editId: e.id,\n                p1: { x, y },\n                p2: { x, y },\n            };\n            if (magneticMode) {\n                const closePoint = plan.walls\n                    .flatMap((item) => [item.p1, item.p2])\n                    .find((p) => distanceBetween(p, wall.p1) <= wallCircleRadius);\n\n                if (closePoint) {\n                    wall.p1.x = closePoint.x;\n                    wall.p1.y = closePoint.y;\n                    wall.p2.x = closePoint.x;\n                    wall.p2.y = closePoint.y;\n                }\n            }\n            plan.walls.push(wall);\n            drawWallStart(drawing, wall);\n        };\n\n        const onMove = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            if (e.type === 'mouse' && !e.buttons) return;\n            const viewBox = getViewBox(drawingRef);\n            const x = viewBox.x + e.x * scale;\n            const y = viewBox.y + e.y * scale;\n            const wall = plan.walls.find((x) => x.editId === e.id);\n            if (wall) {\n                wall.p2.x = x;\n                wall.p2.y = y;\n                if (wallAlignmentMode) {\n                    const orientation = getWallOrientation({ p1: wall.p1, p2: { x, y } });\n                    if (orientation === 'horizontal') {\n                        wall.p2.y = wall.p1.y;\n                    } else {\n                        wall.p2.x = wall.p1.x;\n                    }\n                    const guideLines = findAlignedGuideLines(plan.walls, wall);\n                    drawGuideLines(drawing, wall.p2, guideLines);\n                }\n                drawWall(drawing, wall);\n            }\n        };\n\n        const onEnd = (e: ToolEvent) => {\n            if (stylusMode && e.type === 'touch') return;\n            const wall = plan.walls.find((x) => x.editId === e.id);\n            if (wall) {\n                if (magneticMode) {\n                    const closePoint = plan.walls\n                        .filter((w) => w !== wall)\n                        .flatMap((item) => [item.p1, item.p2])\n                        .find((p) => distanceBetween(p, wall.p2) <= wallCircleRadius);\n\n                    if (closePoint) {\n                        wall.p2.x = closePoint.x;\n                        wall.p2.y = closePoint.y;\n                    }\n                }\n                removeGuideLines(drawing, wall.p2);\n                drawWall(drawing, wall);\n                wall.editId = undefined;\n                commandsHistory.add({\n                    tool: 'wall',\n                    data: { addedWall: wall },\n                });\n            }\n            if (!e.touches || e.touches?.length === 0) {\n                setValue('pointerDown', false);\n            }\n        };\n\n        return registerTool(interactiveRef.current, onStart, onMove, onEnd);\n    }, [\n        scale,\n        stylusMode,\n        magneticMode,\n        wallAlignmentMode,\n        commandsHistory,\n        interactiveRef,\n        selectedTool,\n        plan.walls,\n        drawingRef,\n        drawing,\n        setValue,\n    ]);\n\n    return null;\n};\n","import React, { useEffect } from 'react';\nimport './App.css';\nimport { GlobalContext, useGlobalState } from './components/GlobalContext';\nimport { HistoryPanel } from './components/History/HistoryPanel';\nimport { MiniKeyboard } from './components/Keyboard/Keyboard';\nimport PreventTouch from './components/PreventTouch';\nimport { SettingsPanel } from './components/Settings/SettingsPanel';\nimport { CursorTool } from './components/Tools/CursorTool';\nimport { DestroyTool } from './components/Tools/DestroyTool';\nimport { HistoryTool } from './components/Tools/HistoryTool';\nimport { MoveTool } from './components/Tools/MoveTool';\nimport { PenTool } from './components/Tools/PenTool';\nimport { Toolbox } from './components/Tools/Toolbox';\nimport { WallTool } from './components/Tools/WallTool';\n\nfunction App() {\n    const globalContext = useGlobalState();\n    const { interactiveRef, drawingRef } = globalContext;\n    console.log('App render');\n\n    useEffect(() => {\n        window.addEventListener('resize', () => {});\n    }, []);\n\n    return (\n        <GlobalContext.Provider value={globalContext}>\n            <main className=\"unselectable\">\n                <PreventTouch />\n                <HistoryTool />\n                <WallTool />\n                <CursorTool />\n                <PenTool />\n                <DestroyTool />\n                <MoveTool />\n                <div ref={interactiveRef} className=\"paper main\">\n                    <svg ref={drawingRef}>\n                        <g id=\"pen\" />\n                        <g id=\"guide\" />\n                        <g id=\"walls\" />\n                    </svg>\n                </div>\n                <Toolbox />\n                <SettingsPanel />\n                <MiniKeyboard />\n                <HistoryPanel />\n            </main>\n        </GlobalContext.Provider>\n    );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}